<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }

        body {
    background: #2f3033;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 450px;
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
        }

        .header h1 {
            color: #2d3748;
            font-size: 24px;
            margin-bottom: 8px;
        }

        .header p {
            color: #718096;
            font-size: 14px;
        }

        .password-display {
            display: flex;
            margin-bottom: 25px;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #e2e8f0;
        }

        #password {
            flex-grow: 1;
            padding: 15px;
            border: none;
            background: #f8fafc;
            font-size: 16px;
            font-weight: 500;
            color: #2d3748;
            outline: none;
        }

        #copy-btn {
            background: #5f816d;
            color: white;
            border: none;
            padding: 0 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }

        #copy-btn:hover {
            background: #38a169;
        }

        .options {
            margin-bottom: 25px;
        }

        .option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 0;
        }

        .option label {
            font-weight: 600;
            color: #2d3748;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option-count {
            background: #edf2f7;
            color: #4a5568;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        input[type="number"] {
            width: 70px;
            padding: 8px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            text-align: center;
        }

        input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        .complexity {
            margin-bottom: 25px;
        }

        .complexity label {
            display: block;
            font-weight: 600;
            color: #222e42;
            margin-bottom: 10px;
        }

        #complexity-slider {
            width: 100%;
            margin: 10px 0;
        }

        .complexity-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }

        .complexity-label {
            font-size: 11px;
            color: #718096;
        }

        .actions {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        #generate-btn {
            background: #667eea;
            color: white;
        }

        #generate-btn:hover {
            background: #5a6fd8;
        }

        #reset-btn {
            background: #e2e8f0;
            color: #4a5568;
        }

        #reset-btn:hover {
            background: #cbd5e0;
        }

        .info {
            background: #f0fff4;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
            border-left: 4px solid #44805d;
        }

        .info p {
            color: #1d583b;
            font-size: 12px;
            font-weight: 600;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #375242;
            color: white;
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .notification.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1> üîëüñ• –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π</h1>
            <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –ª–µ–≥–∫–æ –∏ –±—ã—Å—Ç—Ä–æ</p>
        </div>
        
        <div class="password-display">
            <input type="text" id="password" readonly value="{{ initial_password }}">
            <button id="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        
        <div class="options">
            <div class="option">
                <label for="length">
                    <span>–î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è:</span>
                </label>
                <input type="number" id="length" min="4" max="50" value="12">
                <div class="option-count" id="length-count">12</div>
            </div>
            
            <div class="option">
                <label>
                    <input type="checkbox" id="uppercase" checked>
                    –ó–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã (A-Z)
                </label>
                <div class="option-count" id="uppercase-count">26</div>
            </div>
            
            <div class="option">
                <label>
                    <input type="checkbox" id="lowercase" checked>
                    –°—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã (a-z)
                </label>
                <div class="option-count" id="lowercase-count">26</div>
            </div>
            
            <div class="option">
                <label>
                    <input type="checkbox" id="numbers" checked>
                    –¶–∏—Ñ—Ä—ã (0-9)
                </label>
                <div class="option-count" id="numbers-count">10</div>
            </div>
            
            <div class="option">
                <label>
                    <input type="checkbox" id="symbols">
                    –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (!@#$%^&*)
                </label>
                <div class="option-count" id="symbols-count">10</div>
            </div>
        </div>
        
        <div class="complexity">
            <label for="complexity-slider">–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è:</label>
            <input type="range" id="complexity-slider" min="1" max="5" value="3">
            <div class="complexity-labels">
                <span class="complexity-label">–ü—Ä–æ—Å—Ç–æ–π</span>
                <span class="complexity-label">–°—Ä–µ–¥–Ω–∏–π</span>
                <span class="complexity-label">–°–ª–æ–∂–Ω—ã–π</span>
                <span class="complexity-label">–û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π</span>
                <span class="complexity-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π</span>
            </div>
        </div>
        
        <div class="actions">
            <button id="generate-btn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å</button>
            <button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>

        
    </div>
    
    <div class="notification" id="notification">–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!</div>

    <script>
        const passwordInput = document.getElementById('password');
        const copyButton = document.getElementById('copy-btn');
        const generateButton = document.getElementById('generate-btn');
        const resetButton = document.getElementById('reset-btn');
        const lengthInput = document.getElementById('length');
        const uppercaseCheckbox = document.getElementById('uppercase');
        const lowercaseCheckbox = document.getElementById('lowercase');
        const numbersCheckbox = document.getElementById('numbers');
        const symbolsCheckbox = document.getElementById('symbols');
        const complexitySlider = document.getElementById('complexity-slider');
        const notification = document.getElementById('notification');

        function updateCounters() {
            document.getElementById('length-count').textContent = lengthInput.value;
            document.getElementById('uppercase-count').textContent = uppercaseCheckbox.checked ? '26' : '0';
            document.getElementById('lowercase-count').textContent = lowercaseCheckbox.checked ? '26' : '0';
            document.getElementById('numbers-count').textContent = numbersCheckbox.checked ? '10' : '0';
            document.getElementById('symbols-count').textContent = symbolsCheckbox.checked ? '10' : '0';
        }

        async function generatePassword() {
            try {
                const data = {
                    'custom': true,
                    'length': parseInt(lengthInput.value),
                    'uppercase': uppercaseCheckbox.checked,
                    'lowercase': lowercaseCheckbox.checked,
                    'numbers': numbersCheckbox.checked,
                    'symbols': symbolsCheckbox.checked
                };
                
                const response = await fetch('/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.password) {
                    passwordInput.value = result.password;
                } else {
                    showNotification('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è');
                }
                
            } catch (error) {
                console.error('Error:', error);
                showNotification('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');
            }
        }

        function showNotification(message) {
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 2000);
        }

        function copyToClipboard() {
            if (passwordInput.value) {
                passwordInput.select();
                document.execCommand('copy');
                showNotification('–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateCounters();

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        generateButton.addEventListener('click', generatePassword);
        copyButton.addEventListener('click', copyToClipboard);

        resetButton.addEventListener('click', () => {
            lengthInput.value = 12;
            uppercaseCheckbox.checked = true;
            lowercaseCheckbox.checked = true;
            numbersCheckbox.checked = true;
            symbolsCheckbox.checked = false;
            complexitySlider.value = 3;
            updateCounters();
            generatePassword();
        });

        complexitySlider.addEventListener('input', () => {
            const level = parseInt(complexitySlider.value);
            const data = {'complexity': level};
            
            fetch('/generate', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            })
            .then(r => r.json())
            .then(result => {
                if (result.password) {
                    passwordInput.value = result.password;
                }
            });
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        [uppercaseCheckbox, lowercaseCheckbox, numbersCheckbox, symbolsCheckbox].forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                updateCounters();
                generatePassword();
            });
        });

        lengthInput.addEventListener('change', () => {
            updateCounters();
            generatePassword();
        });
    </script>
</body>
</html>